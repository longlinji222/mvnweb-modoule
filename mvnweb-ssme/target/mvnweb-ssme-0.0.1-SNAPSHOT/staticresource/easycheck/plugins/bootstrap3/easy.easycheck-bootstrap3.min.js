/**
 * jQuery EasyCheck Plugin  - Bootstrap plugin file
 * 
 * Version 5.2.0
 * 
 * http://easyproject.cn
 * https://github.com/ushelp/EasyCheck
 * 
 * Author: Ray [ inthinkcolor@gmail.com ]
 * Since: 2011
 * 
 * Dependencies: EasyCheck
 * 
 */
EasyCheck.focusCss="",EasyCheck.errorCss="",EasyCheck.resetOnFocus=!1,EasyCheck.bootstrap3={icon:!0,required:!0,requiredPosition:"after",alert:!0,alertMsg:"Validation failed!"},EasyCheck.chkDef={errorManger:function(a){var c,b="";a.formId&&(b="[id='"+a.formId+"'] "),$(b+"[id^='error_']").each(function(){var d,e,f,g,a=$(this).attr("id").replace("error_",""),c=$(this).parents(".form-group");c.find(".form-control-feedback").remove(),c.removeClass("has-feedback"),c.removeClass("has-error"),c.removeClass("has-success"),d=null,d=$(b+"[id='"+a+"']").length>0?$(b+"[id='"+a+"']"):$(b+"[name='"+a+"']"),e=$("form").has(d).attr("id"),"no"!=EasyCheck.ecss&&"no"!=EasyCheck.formEcss[e]&&(d.attr("ecss")&&"yes"!=d.attr("ecss")||(d.removeClass(EasyCheck.errorCss),e&&EasyCheck.formErrorCss[e]&&d.removeClass(EasyCheck.formErrorCss[e]),f=d.attr("id")||d.attr("name"),g=e+"_"+f,d.addClass(EasyCheck.txtClass[g+"_class"]))),$(b+"[id^='error_']").hide()}),a.restore&&(c=$("#"+a.formId),c.find(".form-control-feedback").remove(),c.find("div").removeClass("has-feedback"),c.find("div").removeClass("has-error"),c.find("div").removeClass("has-success"),$(b+"[id^='correct_']").each(function(){var a=$(this).parents(".form-group");a.find(".form-control-feedback").remove(),a.removeClass("has-feedback"),a.removeClass("has-error"),a.removeClass("has-success"),$(this).hide()}),$(b+"[id^='default_']").each(function(){var c,d,a=$("form").has(this),b=$(this);a?(c=a.attr("id"),d=b.attr("id").substr("default_".length),EasyCheck.chkDef.showDef(b,c,d)):EasyCheck.chkDef.showDef(b)}))},showDef:function(a,b,c){var d,e;b&&(d=a.html(),e=$("#"+c).parents(".form-group"),EasyCheck.bootstrap3.icon&&(e.find(".form-control-feedback").remove(),e.removeClass("has-feedback"),e.removeClass("has-error"),e.removeClass("has-success")),void 0!=EasyCheck.cacheDefMsg[b+"_"+c]?d=EasyCheck.cacheDefMsg[b+"_"+c]:(a.attr("info")&&(d=a.attr("info")),EasyCheck.cacheDefMsg[b+"_"+c]=d),EasyCheck.defMsgs[c]?a.html(EasyCheck.defMsgs[c].replace(EasyCheck.msgMark,d)):EasyCheck.defMsgs[b]?a.html(EasyCheck.defMsgs[b].replace(EasyCheck.msgMark,d)):a.html(EasyCheck.defMsg.replace(EasyCheck.msgMark,d))),a.show()},addChkMethod:function(a,b,c,d,e){function j(d){var h,i,j,k,l,m,n,f=$(b).attr("id")||$(b).attr("name"),g=$("[id='default_"+f+"']");return d?(EasyCheck.clearError(b),h=$("[id='default_"+f+"']"),h&&h.hide(),i='<span class="glyphicon glyphicon-ok form-control-feedback"></span>',j=$("[id='correct_"+f+"']"),k=$("form").has(b).attr("id"),l=$(b).parents(".form-group"),l.removeClass("has-error has-success"),l.addClass("has-success"),EasyCheck.bootstrap3.icon&&(l.addClass("has-feedback"),l.find(".form-control-feedback").remove(),$(b).after(i)),j.length>0&&(j.addClass("help-block"),m=j.html(),void 0!=EasyCheck.cacheCorrectMsg[k+"_"+f]?m=EasyCheck.cacheCorrectMsg[k+"_"+f]:(j.attr("info")&&(m=j.attr("info")),EasyCheck.cacheCorrectMsg[k+"_"+f]=m),EasyCheck.correctMsgs[f]?j.html(EasyCheck.correctMsgs[f].replace(EasyCheck.msgMark,m)):EasyCheck.correctMsgs[k]?j.html(EasyCheck.correctMsgs[k].replace(EasyCheck.msgMark,m)):j.html(EasyCheck.correctMsg.replace(EasyCheck.msgMark,m)),j.show()),c&&"keyup"==c.type&&($(b).removeClass(EasyCheck.errorCss),n=$("form").has(b),n.length>0&&EasyCheck.formErrorCss[n.attr("id")]&&$(b).removeClass(EasyCheck.formErrorCss[n.attr("id")]),n.length>0&&EasyCheck.formFocusCss[n.attr("id")]?$(b).addClass(EasyCheck.formFocusCss[n.attr("id")]):$(b).addClass(EasyCheck.focusCss)),!0):(g=$("[id='default_"+f+"']"),g&&g.hide(),EasyCheck.msgs[f]&&EasyCheck.msgs[f][a]&&(e="string"==typeof EasyCheck.msgs[f][a]?EasyCheck.msgs[f][a]:EasyCheck.msgs[f][a]($(b))),EasyCheck.showError(b,e),c&&c.stopImmediatePropagation(),!1)}var h,i,f=$(b).attr("id")||$(b).attr("name"),g=$("[id='default_"+f+"']");return g&&g.hide(),h=d(b),window.Promise&&h instanceof Promise?i=h.then(function(a){return j(a)},function(){return j(!1)}):j(h)},showError:function(a,b){var c,d,e,f,g,h,i,j,k;"string"==typeof a&&(a=$("#"+a)[0]||$("[name='"+a+"']")[0]),a=$(a),c=a.parents(".form-group"),c.removeClass("has-error has-success"),c.addClass("has-error"),d=a.attr("id")||a.attr("name"),$("[id='correct_"+d+"']").hide(),$("[id='default_"+d+"']").hide(),e=$("[id='error_"+d+"']"),0==e.length&&(f=a.next('[name="required"]'),f.length>0?f.after("<span id='error_"+d+"' class='help-block'></span>"):a.after("<span id='error_"+d+"' class='help-block'></span>"),e=$("[id='error_"+d+"']")),e.addClass("help-block"),g=$("form").has(a).attr("id"),"no"!=EasyCheck.ecss&&"no"!=EasyCheck.formEcss[g]&&(a.attr("ecss")&&"yes"!=a.attr("ecss")||(c.removeClass("has-error has-success"),g&&EasyCheck.formErrorCss[g]?a.addClass(EasyCheck.formErrorCss[g]):c.addClass("has-error"))),h="",i=e.attr("prefix"),i?h=i+b:(i="",h=b),j=e.html(),void 0!=EasyCheck.cacheErrorMsg[g+"_"+d]?j=EasyCheck.cacheErrorMsg[g+"_"+d]:(e.attr("info")&&(j=e.attr("info")),EasyCheck.cacheErrorMsg[g+"_"+d]=j),j&&(h=i+j),k='<span class="glyphicon glyphicon-remove form-control-feedback"></span>',EasyCheck.bootstrap3.icon&&(c.addClass("has-feedback"),c.find(".form-control-feedback").remove(),a.after(k)),EasyCheck.errorMsgs[d]?e.html(EasyCheck.errorMsgs[d].replace(EasyCheck.msgMark,h)):EasyCheck.errorMsgs[g]?e.html(EasyCheck.errorMsgs[g].replace(EasyCheck.msgMark,h)):e.html(EasyCheck.errorMsg.replace(EasyCheck.msgMark,h)),e.show()},clearError:function(a,b){var c,d,e,f,g,h;"string"==typeof a&&(a=$("#"+a)[0]||$("[name='"+a+"']")[0]),a=$(a),c=a.attr("id")||a.attr("name"),d=$("[id='error_"+c+"']"),e=$("form").has(a).attr("id"),d.length>0&&("no"!=EasyCheck.ecss&&"no"!=EasyCheck.formEcss[e]&&(a.attr("ecss")&&"yes"!=a.attr("ecss")||(a.removeClass(EasyCheck.errorCss),e&&EasyCheck.formErrorCss[e]&&a.removeClass(EasyCheck.formErrorCss[e]),f=a.attr("id")||a.attr("name"),g=e+"_"+f,a.addClass(EasyCheck.txtClass[g+"_class"]))),b?d.html(b):d.html(""),d.hide(),h=$("[id='default_"+c+"']"),$("[id='correct_"+c+"']").hide(),EasyCheck.chkDef.showDef(h,e,c)),a.removeClass(EasyCheck.focusCss),e&&EasyCheck.formFocusCss[e]&&a.removeClass(EasyCheck.formFocusCss[e]),f=a.attr("id")||a.attr("name"),g=e+"_"+f,a.addClass(EasyCheck.txtClass[g+"_class"])},initChk:function(a){var b=EasyCheck.getMatches(a.chkName);$(b).each(function(){var f,g,h,i,b=$(this),c=$("form").has(b);c.attr("id"),b.attr("id")||b.attr("name"),f=EasyCheck.bootstrap3.required,f&&".required"==a.chkName&&(g=EasyCheck.bootstrap3.requiredPosition,h='<span name="required" class="text-muted" style="color:#FF9966;">*</span>',"after"==g&&(c.hasClass("form-horizontal")||c.hasClass("form-inline"))?b.parent().after(h):"left"==g?(i=$(this).parents(".form-group").find("label:first"),i.prepend(h)):"right"==g&&(i=$(this).parents(".form-group").find("label:first"),i.append(h)))}),$(b).on("blur change",function(b){EasyCheck.easyCheckBlurIgnore[a.chkName]||EasyCheck.easyCheckEleIgnore[b.target.id||b.target.name]||EasyCheck.easyCheckEleBlurIgnore[b.target.id||b.target.name]||(EasyCheck.blurChk?EasyCheck.chk(this,b,a.chkFunction):"")}).on("focus",function(){var b,c,d,e,f,g;EasyCheck.resetOnFocus&&(EasyCheck.clearError(this),b=$(this),c=b.attr("id")||b.attr("name"),d=$("[id='correct_"+c+"']"),d.length>0?d.filter(":hidden").length>0&&(e=$("[id='default_"+c+"']"),e&&($("[id='correct_"+c+"']").hide(),EasyCheck.chkDef.showDef(e,$("form").has($(c)).attr("id"),c))):(e=$("[id='default_"+c+"']"),e&&($("[id='correct_"+c+"']").hide(),EasyCheck.chkDef.showDef(e,$("form").has($(c)).attr("id"),c))),f=$("form").has(b),g=f.attr("id"),g=f.attr("id"),g&&EasyCheck.formFocusCss[g]?b.addClass(EasyCheck.formFocusCss[g]):b.addClass(EasyCheck.focusCss))}).on("keyup",function(b){EasyCheck.easyCheckKeyupIgnore[a.chkName]||EasyCheck.easyCheckEleIgnore[b.target.id||b.target.name]||EasyCheck.easyCheckEleKeyupIgnore[b.target.id||b.target.name]||(EasyCheck.keyupChk?EasyCheck.chk(this,b,a.chkFunction):"")})},complete:function(a,b){if(EasyCheck.bootstrap3.alert){if(0==$("#alert_"+a).length){var c=$("#"+a).find(":submit:last");c.length>0&&c.before('<div style="display:none" id="alert_'+a+'" class="alert alert-warning alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'+EasyCheck.bootstrap3.alertMsg+"</div>")}b?$("#alert_"+a).hide():$("#alert_"+a).show()}},restoreAllComplete:function(a){$("#alert_"+a).hide()},clearAllErrorComplete:function(a){$("#alert_"+a).hide()}},$(function(){EasyCheck.initDefMsg()});